(function(e){function t(t){for(var n,a,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==i[c]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={app:0},s=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0ba1":function(e,t,r){e.exports=r.p+"img/Photos.c143c95b.png"},1:function(e,t){},2452:function(e,t,r){"use strict";var n=r("f18c"),i=r.n(n);i.a},3059:function(e,t,r){e.exports=r.p+"img/Animals.2e97904e.png"},"333e":function(e,t,r){e.exports=r.p+"img/loading.cebe8ef6.svg"},"35f4":function(e,t,r){e.exports=r.p+"img/Shopping.84f6086b.png"},4572:function(e,t,r){e.exports=r.p+"img/Luxury.4d078e60.png"},"491a":function(e,t,r){e.exports=r.p+"img/NightLife.fa7b5340.png"},"4c02":function(e,t,r){e.exports=r.p+"img/heartFill.2a3fdfa7.svg"},"4f75":function(e,t,r){e.exports=r.p+"img/confirm.81d464ed.png"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("main-header"),n("section",{staticClass:"main"},[n("router-view"),e.isScroll?n("a",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:{el:"#app",force:!1},expression:"{el:'#app', force:false}"}],staticClass:"scroll-up",attrs:{href:"#"}},[n("img",{staticClass:"arrow-up",attrs:{src:r("e60e")}})]):e._e()],1),n("main-footer"),n("mobile-nav")],1)},s=[],a=(r("d3b7"),r("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-header"},[n("h1",{staticClass:"logo",on:{click:e.goToHome}},[e._v("Local Genius")]),n("div",{staticClass:"nav-bar",attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home")]),e.user?[n("router-link",{staticStyle:{position:"relative"},attrs:{to:"/profile"}},[e.notifs?[n("p",{staticClass:"notifs-count"},[e._v(e._s(e.notifs))]),n("img",{staticClass:"notifs-bubble",attrs:{src:r("dd3d")}})]:e._e(),e._v(" Profile ")],2),n("button",{on:{click:e.logout}},[e._v("Logout")])]:n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],2)])}),o=[],c=(r("ac1f"),r("5319"),new n["default"]);window.eventBus=c;var u={data:function(){return{isBooked:!1,params:""}},computed:{location:function(){return"/guide/"===this.params},user:function(){return this.$store.getters.loggedInUser},notifs:function(){return this.$store.getters.unReadNotifs.length}},methods:{click:function(){this.isBooked=!1},logout:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$store.dispatch({type:"logout"}));case 2:location.reload();case 3:case"end":return e.stop()}}),null,this)},goToHome:function(){this.$router.replace("/")}},created:function(){var e=this;c.$on("book",(function(){e.isBooked=!0}))}},l=u,d=r("2877"),p=Object(d["a"])(l,a,o,!1,null,null,null),g=p.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"footer"},[r("p",[e._v("Local-Genius © "+e._s(e.currYear)+" by Inon Ori Dror")])])},m=[],h=(r("0d03"),{data:function(){return{}},computed:{currYear:function(){return(new Date).getFullYear()}},methods:{},created:function(){}}),v=h,w=Object(d["a"])(v,f,m,!1,null,null,null),b=w.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"mobile-nav flex align-center space-around"},[n("router-link",{staticClass:"flex col",attrs:{to:"/",exact:""}},[n("div",{on:{click:function(t){return e.changeActiveLink(1)}}},[1===e.activeLink?n("img",{attrs:{src:r("910e")}}):n("img",{attrs:{src:r("bccc")}})])]),n("router-link",{staticClass:"flex col",attrs:{to:"/profile",exact:""}},[n("div",{on:{click:function(t){return e.changeActiveLink(2)}}},[2===e.activeLink?n("img",{attrs:{src:r("6bff")}}):n("img",{attrs:{src:r("8f8e")}})])]),n("router-link",{staticClass:"flex col",attrs:{to:"/",exact:""}},[n("div",{on:{click:function(t){return e.changeActiveLink(3)}}},[3===e.activeLink?n("img",{attrs:{src:r("6487")}}):n("img",{attrs:{src:r("4c02")}})])]),n("router-link",{staticClass:"flex col",attrs:{to:"/profile",exact:""}},[n("div",{on:{click:function(t){return e.changeActiveLink(4)}}},[4===e.activeLink?n("img",{attrs:{src:r("6626")}}):n("img",{attrs:{src:r("c465")}})])])],1)},_=[],x={data:function(){return{activeLink:1}},methods:{changeActiveLink:function(e){this.activeLink=e}},computed:{notifs:function(){return this.$store.getters.userNotifs}},watch:{"$route.path":function(e,t){"/"===this.$route.path&&(this.activeLink=1),"/profile"===this.$route.path&&(this.activeLink=2)}}},k=x,C=Object(d["a"])(k,y,_,!1,null,null,null),O=C.exports,R=(r("ace4"),r("38cf"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a9"),r("72f7"),"BOf0qAhBz4a-lxagLIqN5ns4y6F4s2Ptailr_RP0abwLiozIceJ0EmZR8a7sHsR0wxSdhdtdbdpaZN4vfBRUS3o");function I(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(!("serviceWorker"in navigator)){r.next=12;break}return r.next=3,regeneratorRuntime.awrap(navigator.serviceWorker.register("/worker.js",{scope:"/"}));case 3:return e=r.sent,r.next=6,regeneratorRuntime.awrap(e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:U(R)}));case 6:return t=r.sent,r.next=9,regeneratorRuntime.awrap(fetch("api/push-notif/subscribe",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 9:console.log("service worker Registeration sent to server..."),r.next=13;break;case 12:console.log("push not supported");case 13:case"end":return r.stop()}}))}function U(e){for(var t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),i=new Uint8Array(n.length),s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}var E={register:I},S={data:function(){return{isScroll:!1}},created:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$store.getters.loggedInUser){t.next=8;break}return this.$store.dispatch({type:"createUserSocket"}),t.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadUsers"}));case 4:return t.next=6,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadCities"}));case 6:return t.next=8,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadNotifs"}));case 8:window.addEventListener("scroll",this.handleScroll),window.addEventListener("beforeunload",(function(){window.removeEventListener("scroll",e.handleScroll),e.$store.dispatch("deleteUserSocket")}));case 10:case"end":return t.stop()}}),null,this)},components:{mainHeader:g,mobileNav:O,mainFooter:b},methods:{handleScroll:function(){this.isScroll=window.scrollY>500}}},$=S,N=Object(d["a"])($,i,s,!1,null,null,null),T=N.exports,F=r("9483");Object(F["a"])("".concat("/","worker.js"),{registered:function(){console.log("worker.js registerd")},error:function(e){console.error(" worker.js Error during  registration:",e)}});var A=r("8c4f"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"home"},[n("div",{staticClass:"hero-container flex justify-center"},[e._m(0),n("city-filter",{attrs:{cities:e.cities}}),e.guide._id?n("span",{staticClass:"login-mobile",on:{click:e.logout}},[e._v("Logout")]):n("router-link",{staticClass:"login-mobile",attrs:{to:"/login"}},[e._v("Login")]),n("div",{staticClass:"join-btn-container"},[e._v(" Not a member? "),n("router-link",{attrs:{to:"/signup"}},[e._v("JOIN!")])],1),n("img",{staticClass:"hero-img",attrs:{src:r("b0f6"),alt:""}}),n("router-link",{staticClass:"become-guide-btn",attrs:{to:"/guide/edit/"+e.guide._id}},[e._v("BECOME A GUIDE")])],1),n("div",{staticClass:"container"},[e._m(1),n("city-list",{attrs:{cities:e.cities}}),n("h2",{staticClass:"list-title"},[e._v("GUIDES OF THE MONTH")]),n("guide-list",{attrs:{guides:e.guides}})],1)])},B=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"titles"},[r("h2",[e._v("Travel perfection made simple.")]),r("h3",[e._v("Connecting travelers with local guides worldwide")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",{staticClass:"list-title"},[e._v("FEATURED DESTINATIONS")])])}],D=(r("a434"),r("7db0"),{query:L,getById:P});function L(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",M);case 1:case"end":return e.stop()}}))}function P(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=M.find((function(t){return t._id===e})),r.abrupt("return",t);case 2:case"end":return r.stop()}}))}var M=[{_id:"101",name:"New-York",imgUrl:"https://images.unsplash.com/photo-1534430480872-3498386e7856?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"},{_id:"102",name:"Moscow",imgUrl:"https://bigseventravel.com/wp-content/uploads/2019/03/moscow-1200x675.png"},{_id:"106",name:"Mexico-City",imgUrl:"https://images.unsplash.com/photo-1518105779142-d975f22f1b0a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"},{_id:"103",name:"Paris",imgUrl:"https://images.unsplash.com/photo-1524396309943-e03f5249f002?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=967&q=80"},{_id:"104",name:"Sydney",imgUrl:"https://cdn.pixabay.com/photo/2014/05/26/09/58/sydney-opera-house-354375_1280.jpg"},{_id:"107",name:"Athens",imgUrl:"https://bigseventravel.com/wp-content/uploads/2019/03/anastasia-sklyar-1171169-unsplash-1024x683.jpg"},{_id:"109",name:"Barcelona",imgUrl:"https://cdn.pixabay.com/photo/2014/04/26/10/02/parc-guell-332390_1280.jpg"},{_id:"110",name:"Rome",imgUrl:"https://cdn.pixabay.com/photo/2012/03/01/00/33/trevi-19688_1280.jpg"},{_id:"111",name:"London",imgUrl:"https://images.unsplash.com/photo-1505761671935-60b3a7427bad?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"}],H=(r("99af"),r("bc3a")),Y=r.n(H),G="/api/",W=Y.a.create({withCredentials:!0}),q={get:function(e,t){return J(e,"GET",t)},post:function(e,t){return J(e,"POST",t)},put:function(e,t){return J(e,"PUT",t)},delete:function(e,t){return J(e,"DELETE",t)}};function J(e){var t,r,n,i=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"get",r=i.length>2&&void 0!==i[2]?i[2]:null,s.prev=2,s.next=5,regeneratorRuntime.awrap(W({url:"".concat(G).concat(e),method:t,data:r}));case 5:return n=s.sent,s.abrupt("return",n.data);case 9:s.prev=9,s.t0=s["catch"](2),console.log("ERROR IN AJAX CALL:",s.t0),401===s.t0.response.status&&ci.push("/login");case 13:case"end":return s.stop()}}),null,null,[[2,9]])}var V="user/";function z(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(q.get(V));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}function K(e){return q.put(V+e._id,e)}function Q(e){return q.post(V,e)}function X(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.get(V+e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}function Z(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(q.post("auth/login",e));case 3:if(t=r.sent,!t){r.next=6;break}return r.abrupt("return",re(t));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]])}function ee(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.post("auth/signup",e));case 2:return t=r.sent,r.abrupt("return",re(t));case 4:case"end":return r.stop()}}))}function te(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(q.post("auth/logout"));case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}))}function re(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}var ne={query:z,getById:X,getInterests:ie,login:Z,signup:ee,logout:te,update:K,add:Q};function ie(){return[{name:"Culture",isSelected:!1},{name:"Coffee",isSelected:!1},{name:"Shopping",isSelected:!1},{name:"Music",isSelected:!1},{name:"NightLife",isSelected:!1},{name:"Animals",isSelected:!1},{name:"OutDoor",isSelected:!1},{name:"Food",isSelected:!1},{name:"Photos",isSelected:!1},{name:"Luxury",isSelected:!1},{name:"Architonic",isSelected:!1},{name:"Science",isSelected:!1}]}var se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"city-list"},[r("section",{staticClass:"flex-list"},e._l(e.citiesToWhow,(function(e){return r("city-preview",{key:e._id,attrs:{city:e}})})),1)])},ae=[],oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-link",{attrs:{to:"/city/"+e.city._id}},[r("section",{staticClass:"city-preview"},[r("h2",{staticClass:"city-prev-title"},[e._v(e._s(e.city.name))]),r("img",{staticClass:"ratio-square",attrs:{src:e.city.imgUrl}})])])},ce=[],ue={props:{city:Object}},le=ue,de=Object(d["a"])(le,oe,ce,!1,null,null,null),pe=de.exports,ge={props:{cities:Array},components:{cityPreview:pe},computed:{citiesToWhow:function(){return JSON.parse(JSON.stringify(this.cities)).splice(0,8)}}},fe=ge,me=Object(d["a"])(fe,se,ae,!1,null,null,null),he=me.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"city-filter"},[r("input",{attrs:{list:"cities",type:"text",placeholder:"Where do you wanna go?"},on:{change:e.goToCity}}),r("datalist",{attrs:{id:"cities"}},e._l(e.cities,(function(e){return r("option",{key:e._id,staticStyle:{width:"100%"},domProps:{value:e.name}})})),0),r("button",{staticClass:"btn"},[e._v("Search")])])},we=[],be=(r("c740"),r("b0c0"),{props:{cities:Array},methods:{goToCity:function(e){var t=this.cities.findIndex((function(t){return t.name===e.target.value}));this.$router.push("/city/".concat(this.cities[t]._id))}}}),ye=be,_e=Object(d["a"])(ye,ve,we,!1,null,null,null),xe=_e.exports,ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"guide-list-container"},[r("ul",{staticClass:"guide-list guide-list-grid guides-container"},e._l(e.guides,(function(e){return r("guide-preview",{key:e.id,attrs:{guide:e}})})),1)])},Ce=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"guide-preview"},[n("div",{staticClass:"ratio-card-guide"},[n("vue-tiny-slider",{ref:"tinySlider",attrs:{"mouse-drag":!0,loop:!0,items:"1",nav:!1,controlsText:["&#10094;","&#10095;"],rewind:!0}},[n("div",{staticClass:"ratio-guide-img"},[n("img",{attrs:{src:e.guide.profileImgUrl},on:{click:function(t){return e.showGuideProfile(e.guide._id)}}})]),e._l(e.guide.imgUrls,(function(t,r){return n("div",{key:r,staticClass:"ratio-guide-img"},[n("img",{attrs:{src:t},on:{click:function(t){return e.showGuideProfile(e.guide._id)}}})])}))],2)],1),n("div",{staticClass:"guide-top-data"},[n("div",{staticClass:"guide-name"},[n("router-link",{attrs:{to:"/guide/"+e.guide._id}},[e._v(e._s(e.guide.name))]),n("div",{staticClass:"guide-langs"},[e._v(" ("),e._l(e.guide.langs,(function(t,r){return n("p",{key:r},[e._v(e._s(t))])})),e._v(") ")],2)],1),n("div",{staticClass:"rating"},[n("p",[n("span",[e._v("★")]),e._v(" "+e._s(e.guide.rate)+" ")])])]),n("div",{staticClass:"guide-short-desc"},[n("p",[e._v(e._s(e.guide.desc))])]),n("div",{staticClass:"guide-city"},[n("p",[e._v("From: "+e._s(e.guide.city))])]),n("ul",{staticClass:"guide-interests-list"},e._l(e.guide.interests,(function(t,i){return n("li",{key:i,staticClass:"guide-interest",class:t},[e._v(" "+e._s(t.toUpperCase())+" "),n("img",{attrs:{src:r("9bed")("./"+t+".png")}})])})),0)])},Re=[],Ie=r("2fa7"),Ue=r("91a0"),Ee=r.n(Ue),Se=Object(Ie["a"])({props:{guide:Object},data:function(){return{}},methods:{},computed:{},components:{"vue-tiny-slider":Ee.a}},"methods",{showGuideProfile:function(e){this.$router.push("/guide/".concat(e))}}),$e=Se,Ne=Object(d["a"])($e,Oe,Re,!1,null,null,null),Te=Ne.exports,Fe={props:{guides:Array},components:{guidePreview:Te}},Ae=Fe,je=Object(d["a"])(Ae,ke,Ce,!1,null,null,null),Be=je.exports,De={router:ci,name:"home",components:{cityFilter:xe,cityList:he,guideList:Be},data:function(){return{cities:[],guides:[],guide:{}}},methods:{logout:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$store.dispatch({type:"logout"}));case 2:location.reload();case 3:case"end":return e.stop()}}),null,this)}},created:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(D.query());case 2:return e=r.sent,this.cities=JSON.parse(JSON.stringify(e)),r.next=6,regeneratorRuntime.awrap(ne.query());case 6:t=r.sent,t=JSON.parse(JSON.stringify(t)),this.guides=t.splice(0,4),this.$store.getters.loggedInUser&&(this.guide=this.$store.getters.loggedInUser);case 10:case"end":return r.stop()}}),null,this)}},Le=De,Pe=Object(d["a"])(Le,j,B,!1,null,null,null),Me=Pe.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"mt-10"},[n("div",{staticClass:"city-header-img city-header-container"},[e.currCity?n("h2",{staticClass:"city-name"},[e._v(e._s(e.currCity.name)+"'s Guides")]):e._e(),n("div",{staticClass:"filter-panel"},[n("h4",[e._v(" Find your guides, get their insight on the city, and enjoy "+e._s(e.currCity.name)+" like it was your second home! ")]),n("button",{on:{click:e.toggleFilter}},[e._v("Find by interest")])]),n("guide-filter",{attrs:{isOpen:e.isFilterOpen,interests:e.interests},on:{filtered:e.setFilter}},[n("button",{staticClass:"filter-close-btn",on:{click:e.toggleFilter}},[e._v("x")])])],1),0===e.guides.length?n("div",{staticClass:"loading-svg"},[n("img",{attrs:{src:r("333e"),alt:"loading"}})]):n("guide-list",{attrs:{guides:e.guidesToShow}})],1)},Ye=[],Ge=(r("4de4"),r("c975"),r("45fc"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[e.isOpen?n("section",{staticClass:"guide-filter-container"},[n("ul",{staticClass:"guide-interests-filter-list"},[e._t("default"),n("div",{staticClass:"filter-header"},[n("h2",[e._v("What are you interested in?")])]),e._l(e.interests,(function(t,i){return n("li",{key:i,staticClass:"guide-filter-interest",class:{"interest-selected":t.isSelected},on:{click:function(r){return e.selectInterest(t)}}},[e._v(" "+e._s(t.name.toUpperCase())+" "),n("img",{attrs:{src:r("9bed")("./"+t.name+".png")}})])})),n("div",{staticClass:"filter-btn-container"},[n("button",{on:{click:e.setFilter}},[e._v("FIND")])])],2)]):e._e()])}),We=[],qe={props:{isOpen:Boolean,interests:Array},data:function(){return{filterBy:{interests:[]}}},methods:{selectInterest:function(e){e.isSelected=!e.isSelected;this.filterBy.interests;var t=this.filterBy.interests.indexOf(e.name);t<0?this.filterBy.interests.push(e.name):this.filterBy.interests.splice(t,1)},setFilter:function(){this.$emit("filtered",JSON.parse(JSON.stringify(this.filterBy)))}},created:function(){}},Je=qe,Ve=(r("2452"),Object(d["a"])(Je,Ge,We,!1,null,"68510d67",null)),ze=Ve.exports,Ke={data:function(){return{currCity:"",guides:[],filterBy:null,isFilterOpen:!1,interests:[]}},methods:{setFilter:function(e){this.filterBy=e,this.isFilterOpen=!1},toggleFilter:function(){this.isFilterOpen=!this.isFilterOpen}},computed:{guidesToShow:function(){var e=this;if(this.filterBy&&0!==this.filterBy.interests.length){var t=this.guides.filter((function(t){var r=t.interests.some((function(t){return-1!==e.filterBy.interests.indexOf(t)}));return r}));return t}return this.guides}},created:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params._id,t.prev=1,t.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"getCityById",cityId:e}));case 4:return this.currCity=t.sent,t.next=7,regeneratorRuntime.awrap(this.$store.dispatch("loadUsers"));case 7:this.guides=this.$store.getters.guides,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:this.interests=ne.getInterests();case 14:case"end":return t.stop()}}),null,this,[[1,10]])},components:{guideList:Be,guideFilter:ze}},Qe=Ke,Xe=Object(d["a"])(Qe,He,Ye,!1,null,null,null),Ze=Xe.exports,et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"guide-details-container mt-10"},[r("guide-personal-info",{attrs:{guide:e.guide}}),e.guide?r("review-panel",{attrs:{guide:e.guide}}):e._e()],1)},tt=[],rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.guide?n("section",{staticClass:"guide-container flex col"},[n("button",{staticClass:"back-btn",on:{click:e.back}},[e._v("Back")]),n("div",{staticClass:"personal-title-container flex space-between"},[n("div",{staticClass:"personal-txt flex col"},[n("h1",[e._v(e._s(e.guide.name))]),n("h2",[e._v(e._s(e.guide.desc))]),n("ul",{staticClass:"guide-interests-list"},e._l(e.guide.interests,(function(t,i){return n("li",{key:i,staticClass:"guide-interest",class:t},[n("p",[e._v(e._s(t.toUpperCase()))]),n("img",{attrs:{src:r("9bed")("./"+t+".png")}})])})),0)]),n("img",{staticClass:"profile-img",attrs:{src:e.guide.profileImgUrl}})]),n("div",{staticClass:"details-banner"},[n("p",{staticClass:"from-p"},[e._v("I'm from: "+e._s(e.guide.city))]),n("p",{staticClass:"langs-p"},[e._v("Languages: "),e._l(e.guide.langs,(function(t,r){return n("span",{key:r},[e._v(e._s(t))])}))],2),n("img",{attrs:{src:r("cefb")}})]),n("div",{staticClass:"flex row"},[n("div",{staticClass:"questions-container container flex col"},[n("div",{staticClass:"main-quest flex col"},[n("h1",[e._v("TELL US A LITTLE BIT ABOUT YOURSELF")]),n("h2",[e._v(e._s(e.guide.about))])]),n("div",{staticClass:"guide-details"},e._l(e.guide.questions,(function(t,r,i){return n("div",{key:i},[n("h1",[e._v(e._s(r))]),n("h3",[e._v(e._s(t))]),e.guide.imgUrls[i]?n("img",{attrs:{src:e.guide.imgUrls[i++]}}):e._e()])})),0)]),n("bookingPanel",{attrs:{guide:e.guide}})],1)]):e._e()},nt=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"booking-panel-container",class:{"show-modal":e.isOpen}},[n("div",{staticClass:"booking-panel flex"},[n("div",{staticClass:"booking-desktop"},[n("div",{staticClass:"booking-modal"},[e.isOpen?n("span",{staticClass:"close-btn",on:{click:e.click}},[e._v("✖")]):e._e(),n("h1",[e._v("Pick a date")]),n("calander",{attrs:{disabledDates:e.disabledDates},on:{datePicked:e.setDate}})],1)]),n("div",{staticClass:"booking-price-rate flex"},[n("div",{staticClass:"persons flex space-around"},[e._m(0),n("div",[n("el-radio-group",{attrs:{"text-color":"black",fill:"rgba(255, 90, 95, 0.23)",size:"medium"},model:{value:e.booking.attendees,callback:function(t){e.$set(e.booking,"attendees",t)},expression:"booking.attendees"}},e._l(e.guide.attendees,(function(e,t){return n("el-radio-button",{key:t,attrs:{label:e}})})),1)],1)]),n("div",{staticClass:"guide-price-rate"},[n("div",{staticClass:"guide-price flex align-center"},[n("h2",[e._v(e._s(e.price)+"$")]),n("h4",[e._v("For my tour")])]),n("div",{staticClass:"booking-rate"},[n("h2",[e._v("★")]),n("h3",[e._v(" "+e._s(e.guide.rate)+" ")])])]),e.isLoading?n("img",{staticClass:"loading-booking",attrs:{id:"book",src:r("333e")}}):e._e(),n("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[e.isBooking?n("img",{staticClass:"confirm-img",attrs:{src:r("4f75")}}):e._e()]),n("button",{ref:"bookBtn",staticClass:"modal-btn",on:{click:e.click}},[e._v("Book")]),n("button",{ref:"bookBtn",staticClass:"book-btn",class:{booked:e.isBooking},on:{click:e.onBook}},[n("a",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#book",expression:"'#book'"}],staticClass:"scroll",attrs:{href:"#"}}),e._v("Book")])],1)])])},st=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"persons"}},[r("h4",{staticClass:"persons-header"},[e._v("How many people?")])])}],at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-date-picker",{attrs:{value:null,color:"red","is-inline":"","disabled-dates":e.disabledDates},on:{input:e.dates}})},ot=[],ct={props:{disabledDates:Array},data:function(){return{pickedDate:""}},methods:{dates:function(e){this.pickedDate=e,this.$emit("datePicked",e.getTime())}},computed:{}},ut=ct,lt=Object(d["a"])(ut,at,ot,!1,null,null,null),dt=lt.exports,pt={props:{guide:Object},components:{calander:dt},data:function(){return{disabledDates:[],booking:{byUserId:"",toGuideId:"",createdAt:"",at:"",price:"",attendees:1},isOpen:!1,isBooking:!1,isLoading:!1}},computed:{price:function(){return this.guide.price*this.booking.attendees}},methods:{click:function(){this.isOpen=!this.isOpen,this.isBooking=!1},onBook:function(){var e=this;this.booking.createdAt=Date.now(),this.booking.price=this.guide.price,this.booking.price=this.booking.attendees*this.booking.price,this.isLoading=!0,setTimeout((function(){e.isLoading=!1,e.isBooking=!e.isBooking,"Booked!"===e.$refs.bookBtn.innerText?e.$refs.bookBtn.innerText="Book":e.$refs.bookBtn.innerText="Booked!"}),1e3),c.$emit("book"),this.$store.dispatch({type:"saveBooking",booking:JSON.parse(JSON.stringify(this.booking))}),this.isOpen&&setTimeout((function(){e.isOpen=!1,e.isBooking=!1}),3e3)},setDate:function(e){this.booking.at=e}},created:function(){this.booking.toGuideId=this.$route.params._id,this.$store.getters.loggedInUser&&(this.booking.byUserId=this.$store.getters.loggedInUser._id)}},gt=pt,ft=Object(d["a"])(gt,it,st,!1,null,null,null),mt=ft.exports,ht={props:{guide:Object},data:function(){return{}},components:{bookingPanel:mt},methods:{back:function(){this.$router.go(-1)}}},vt=ht,wt=Object(d["a"])(vt,rt,nt,!1,null,null,null),bt=wt.exports,yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"review-list-container"},[e.loggedInUser.name?r("review-add",{attrs:{loggedInUser:e.loggedInUser,guide:e.guide},on:{saveReview:e.saveReview}}):e._e(),r("review-list",{attrs:{loggedInUser:e.loggedInUser,reviews:e.reviews},on:{removeReview:e.removeReview}})],1)},_t=[];function xt(){var e,t,r,n,i=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:for(r in e=i.length>0&&void 0!==i[0]?i[0]:{},t="",e._id&&(e.isGuide?t+="aboutGuideId=".concat(e._id,"&"):t+="byUserId=".concat(e._id,"&")),e)t+="".concat(r,"=").concat(e[r],"&");return s.next=6,regeneratorRuntime.awrap(q.get("review/?".concat(t)));case 6:return n=s.sent,s.abrupt("return",n);case 8:case"end":return s.stop()}}))}function kt(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.post("review",e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}function Ct(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.delete("review/".concat(e)));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}var Ot={query:xt,add:kt,remove:Ct},Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"review-preview-container"},[r("div",{staticClass:"reviews-header"},[r("h2",[e._v("Reviews "),r("span",[e._v("("+e._s(e.reviews.length)+")")]),e._v(":")])]),e._l(e.reviews,(function(t,n){return r("reviewDetails",{key:n,attrs:{loggedInUser:e.loggedInUser,review:t},on:{removeReview:e.removeReview}})}))],2)},It=[],Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"review-details"},[r("div",{staticClass:"review-header"},[r("div",{staticClass:"review-main-txt"},[r("div",{staticClass:"img-container"},[r("img",{attrs:{src:e.imgUrl}})]),r("div",{staticClass:"review-txt flex col"},[r("div",{staticClass:"review-txt-title"},[r("h2",[e._v(e._s(e.review.byUser.name))]),r("div",{staticClass:"review-time-rate flex space-between"},[r("span",{attrs:{title:e._f("moment")(+e.review.createdAt,"calendar")}},[e._v(e._s(e._f("moment")(+e.review.createdAt,"calendar")))]),r("span",{staticClass:"rate"},[e._v("★ "+e._s(e.review.rate))])])]),r("h3",[e._v(e._s(e.review.title))]),r("p",[e._v(e._s(e.review.txt))])])])]),e.loggedInUser._id===e.review.byUser._id?r("button",{staticClass:"remove-btn",on:{click:function(t){return e.removeReview(e.review._id)}}},[e._v("x")]):e._e()])},Et=[],St={props:{review:Object,loggedInUser:{type:Object}},methods:{removeReview:function(e){this.$emit("removeReview",e)}},computed:{imgUrl:function(){var e=this.review.byUser.imgUrl?this.review.byUser.imgUrl:"https://srpc.ukzn.ac.za/wp-content/uploads/2018/05/profile-placeholder.png";return e}},created:function(){}},$t=St,Nt=Object(d["a"])($t,Ut,Et,!1,null,null,null),Tt=Nt.exports,Ft={props:{reviews:Array,loggedInUser:{type:Object}},methods:{removeReview:function(e){this.$emit("removeReview",e)}},components:{reviewDetails:Tt},created:function(){}},At=Ft,jt=Object(d["a"])(At,Rt,It,!1,null,null,null),Bt=jt.exports,Dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.guide?r("section",{staticClass:"review-form-container"},[r("h2",[e._v("Write a review about "+e._s(e.guide.name))]),r("div",{staticClass:"add-review-container"},[r("form",{staticClass:"review-form",on:{submit:function(t){return t.preventDefault(),e.saveReview(t)}}},[r("div",{staticClass:"form-inputs"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.review.title,expression:"review.title"}],staticClass:"details-input",attrs:{type:"text",placeholder:"Title"},domProps:{value:e.review.title},on:{input:function(t){t.target.composing||e.$set(e.review,"title",t.target.value)}}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.txt,expression:"review.txt"}],staticClass:"details-input",attrs:{placeholder:"Your opinion matters!"},domProps:{value:e.review.txt},on:{input:function(t){t.target.composing||e.$set(e.review,"txt",t.target.value)}}}),r("span",[e._v("Rate")]),r("el-select",{staticClass:"select",attrs:{placeholder:"Pick a rate"},model:{value:e.review.rate,callback:function(t){e.$set(e.review,"rate",t)},expression:"review.rate"}},e._l(5,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1),r("button",{staticClass:"add-review-btn"},[e._v("Send")])],1)]),r("reviewDetails",{staticClass:"new-review",attrs:{loggedInUser:e.loggedInUser,review:e.review}})],1)]):e._e()},Lt=[],Pt={props:{guide:Object,loggedInUser:Object},components:{reviewDetails:Tt},data:function(){return{review:{title:"",txt:"",rate:"",byUser:{}}}},methods:{saveReview:function(){this.review.txt&&this.review.title&&this.review.rate&&(this.$emit("saveReview",JSON.parse(JSON.stringify(this.review))),this.review.title="",this.review.txt="",this.review.rate="",this.review.createdAt=new Date)}},created:function(){this.review.createdAt=new Date,this.review.byUser.name=this.loggedInUser.name,this.review.byUser.imgUrl=this.loggedInUser.profileImgUrl}},Mt=Pt,Ht=Object(d["a"])(Mt,Dt,Lt,!1,null,null,null),Yt=Ht.exports,Gt={data:function(){return{filterBy:null}},computed:{guide:function(){return this.$store.getters.guide},reviews:function(){return this.$store.getters.reviews?this.$store.getters.reviews:[]},loggedInUser:function(){var e=this.$store.getters.loggedInUser;return e?this.$store.getters.loggedInUser:{_id:""}}},methods:{saveReview:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return delete e.byUser,delete e.createdAt,e.createdAt=Date.now(),e.byUserId=this.loggedInUser._id,e.aboutGuideId=this.guide._id,t.next=7,regeneratorRuntime.awrap(this.$store.dispatch({type:"saveReview",review:e}));case 7:return t.sent,t.next=10,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadReviews",filterBy:JSON.parse(JSON.stringify(this.filterBy))}));case 10:case"end":return t.stop()}}),null,this)},removeReview:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$store.dispatch({type:"removeReview",reviewId:e}));case 2:return t.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadReviews",filterBy:JSON.parse(JSON.stringify(this.filterBy))}));case 4:case"end":return t.stop()}}),null,this)}},created:function(){var e={_id:this.guide._id,isGuide:!0,recent:1};this.filterBy=e},components:{reviewList:Bt,reviewAdd:Yt}},Wt=Gt,qt=Object(d["a"])(Wt,yt,_t,!1,null,null,null),Jt=qt.exports,Vt={data:function(){return{filter:null}},computed:{guide:function(){return this.$store.getters.guide}},created:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this.$route.params._id,r.prev=1,r.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"getUserById",_id:e}));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](1),console.log(r.t0);case 9:return window.scrollTo(0,0),t={_id:this.guide._id,isGuide:!0,recent:1},this.filter=t,r.next=14,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadReviews",filterBy:t}));case 14:case"end":return r.stop()}}),null,this,[[1,6]])},components:{guidePersonalInfo:bt,reviewPanel:Jt}},zt=Vt,Kt=Object(d["a"])(zt,et,tt,!1,null,null,null),Qt=Kt.exports,Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"profile mt-10"},[r("profile-menu")],1)},Zt=[],er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.setCmp},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.cmps,(function(t,n){return r("el-tab-pane",{key:n,attrs:{label:t,name:t}},[r(e.activeName,{tag:"component",on:{notifClicked:e.notifClicked}})],1)})),1)},tr=[],rr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"overview-container"},[n("div",{staticClass:"overview-main"},[n("div",{staticClass:"overview-header"},[n("h1",[e._v(e._s(e.guide.name))]),n("img",{attrs:{src:e.guide.profileImgUrl}})]),n("div",{staticClass:"dates-picker"},[n("h2",[e._v("Your Calendar")]),n("h5",[e._v("Select dates to block them")]),e.isLoading?n("div",[n("img",{attrs:{src:r("333e"),alt:"loading"}})]):n("v-date-picker",{attrs:{attributes:e.attrs,mode:"range","disabled-dates":e.disabledDates,value:null,color:"red","is-inline":""},on:{input:e.selectDates}}),n("button",{staticClass:"dates-btn",on:{click:e.saveDates}},[e._v("Block these dates")])],1)]),n("div",{staticClass:"overview-notifs-list"},[n("h2",{staticClass:"overview-headers"},[e._v("Notifications")]),e._l(e.notifications,(function(t){return n("notif-preview",{key:t._id,attrs:{notification:t},nativeOn:{click:function(r){return e.notifClicked(t)}}})}))],2),n("h2",{staticClass:"overview-headers"},[e._v("Upcoming Bookings:")]),n("div",{staticClass:"overview-booking-list"},e._l(e.bookings,(function(e,t){return n("booking-preview",{key:t,attrs:{booking:e}})})),1),n("h2",{staticClass:"overview-headers"},[e._v("Recent Reviews:")]),n("div",{staticClass:"review-details-list"},e._l(e.reviews,(function(t,r){return n("review-details",{key:r,attrs:{loggedInUser:e.loggedInUser,review:t}})})),1)])},nr=[];r("4160"),r("159b");function ir(){var e,t,r,n,i=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:for(r in e=i.length>0&&void 0!==i[0]?i[0]:{},t="",e._id&&(e.isGuide?t+="toGuideId=".concat(e._id,"&"):t+="byUserId=".concat(e._id,"&")),e)t+="".concat(r,"=").concat(e[r],"&");return s.next=6,regeneratorRuntime.awrap(q.get("booking/?".concat(t)));case 6:return n=s.sent,s.abrupt("return",n);case 8:case"end":return s.stop()}}))}function sr(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.post("booking",e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}var ar={query:ir,add:sr},or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"booking-preview"},[r("div",{staticClass:"booking-top flex space-between"},[r("h3",[e._v("Booked by "+e._s(e.booking.byUser.name)+" ")]),r("p",{staticClass:"date"},[e._v(e._s(e._f("moment")(e.booking.createdAt,"calendar")))])]),r("div",{staticClass:"booking-details flex"},[r("div",{staticClass:"booking-img"},[r("img",{attrs:{src:e.imgUrl}})]),r("div",{staticClass:"booking-info flex"},[r("ul",[r("li",[e._v("For "+e._s(e.booking.attendees)+" attendees")]),r("li",{attrs:{title:e._f("moment")(e.booking.at,"calendar")}},[e._v("The tour is "+e._s(e._f("moment")(e.booking.at,"from")))]),r("li",[e._v("("+e._s(e.date)+")")])]),r("button",{on:{click:e.goToMsg}},[e._v("Send message")])])])])},cr=[],ur={props:{booking:Object},methods:{goToMsg:function(){c.$emit("goMsg")}},computed:{imgUrl:function(){var e=this.booking.byUser.imgUrl?this.booking.byUser.imgUrl:"https://srpc.ukzn.ac.za/wp-content/uploads/2018/05/profile-placeholder.png";return e},date:function(){var e=new Date(this.booking.at);return e.toLocaleDateString()}}},lr=ur,dr=Object(d["a"])(lr,or,cr,!1,null,null,null),pr=dr.exports,gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.notification.from?r("div",{staticClass:"notif-preview flex col"},[r("h1",[e._v(e._s(e.notification.txt))]),r("p",[e._v(e._s(e._f("moment")(+e.notification.createdAt,"from")))]),r("div",{staticClass:"flex align-center"},[r("div",{staticClass:"img-container"},[r("img",{attrs:{src:e.notification.from.imgUrl,alt:""}})]),r("p",[e._v("From "+e._s(e.notification.from.name))])])]):e._e()},fr=[],mr={props:{notification:Object}},hr=mr,vr=(r("f560"),Object(d["a"])(hr,gr,fr,!1,null,"d8d88704",null)),wr=vr.exports,br={components:{reviewDetails:Tt,bookingPreview:pr,notifPreview:wr},data:function(){return{isLoading:!0,attrs:[{bar:!0,popover:{label:"Tour!"},dates:[]}],selectedDates:[],guide:{},bookings:[],reviews:[],disabledDates:[]}},methods:{selectDates:function(e){this.selectedDates=e},dates:function(e){this.selectedDates=e},saveDates:function(){this.disabledDates.push(this.selectedDates)},notifClicked:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(JSON.stringify(e)),e.isRead=!0,t.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"updateNotif",notif:e}));case 4:this.$emit("notifClicked",e);case 5:case"end":return t.stop()}}),null,this)}},computed:{notifications:function(){return this.$store.getters.unReadNotifs},loggedInUser:function(){var e=this.$store.getters.loggedInUser;return e?this.$store.getters.loggedInUser:{_id:""}}},created:function(){var e,t,r,n=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=this.$store.getters.loggedInUser._id,i.next=3,regeneratorRuntime.awrap(this.$store.dispatch({type:"getUserById",_id:e}));case 3:return this.guide=this.$store.getters.guide,t={_id:e,isGuide:!0,upcoming:1},i.next=7,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadBookings",filterBy:t}));case 7:return this.bookings=this.$store.getters.bookings,this.bookings.forEach((function(e){n.attrs[0].dates.push(new Date(e.at))})),i.next=11,regeneratorRuntime.awrap(Ot.query(t));case 11:r=i.sent,this.reviews=r,this.isLoading=!1;case 14:case"end":return i.stop()}}),null,this)}},yr=br,_r=Object(d["a"])(yr,rr,nr,!1,null,null,null),xr=_r.exports,kr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"messenger-container"},[r("recent-chats",{attrs:{user:e.user,chats:e.recentChats},on:{selectChat:e.selectChat}}),e.selectedChat?r("chat",{attrs:{user:e.user,chat:e.selectedChat},on:{sendMsg:e.sendMsg}}):e._e()],1)},Cr=[],Or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.chat?r("section",{staticClass:"chat",attrs:{id:"recent"}},[r("div",{staticClass:"chat-header"},[r("img",{attrs:{src:e.img}}),r("h1",[e._v(e._s(e.name))])]),r("div",{staticClass:"chat-txt",attrs:{id:"chat"}},e._l(e.chat.msgs,(function(t,n){return r("div",{key:n,staticClass:"msg",class:e.checkMsg(t)},[r("img",{attrs:{src:e.checkUrl(t)}}),r("p",[e._v(e._s(t.txt))])])})),0),r("form",{staticClass:"input-msg",on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.msg.txt,expression:"msg.txt"}],attrs:{type:"text",placeholder:"Type a message..."},domProps:{value:e.msg.txt},on:{input:function(t){t.target.composing||e.$set(e.msg,"txt",t.target.value)}}}),r("button",[e._v("Send")])])]):e._e()},Rr=[],Ir=r("8055"),Ur=r.n(Ir),Er="/",Sr=Ur()(Er),$r={on:Nr,emit:Tr};function Nr(e,t){Sr.on(e,t)}function Tr(e,t){Sr.emit(e,t)}var Fr={props:{user:Object,chat:Object},data:function(){return{msg:{txt:"",isRead:!1},name:""}},methods:{checkMsg:function(e){return e.in?"incoming-msg":"sent-msg"},checkUrl:function(e){return e.fromId===this.chat.user._id?this.chat.user.imgUrl:this.chat.guide.imgUrl},sendMsg:function(){this.msg.txt&&(this.msg.fromId=this.user._id,this.msg.toId=this.chat.guide._id===this.user._id?this.chat.user._id:this.chat.guide._id,this.$emit("sendMsg",JSON.parse(JSON.stringify(this.msg))),this.msg.txt="")},sortMsgs:function(){var e=this;this.chat.msgs.forEach((function(t){t.fromId!==e.user._id&&(t.in=!0)}))},checkName:function(){this.user._id===this.chat.user._id?this.name=this.chat.guide.name:this.user._id===this.chat.guide._id&&(this.name=this.chat.user.name)}},computed:{img:function(){return this.user._id===this.chat.user._id?this.chat.guide.imgUrl:this.user._id===this.chat.guide._id?this.chat.user.imgUrl:void 0}},mounted:function(){this.chat.msgs.length&&this.sortMsgs(),this.checkName()},watch:{"chat.msgs":function(){this.sortMsgs(),this.checkName()}},updated:function(){var e=this.$el;e.scrollTop=e.scrollHeight}},Ar=Fr,jr=Object(d["a"])(Ar,Or,Rr,!1,null,null,null),Br=jr.exports,Dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.chats.length?r("section",{staticClass:"recent-chats",attrs:{id:"recent"}},[r("div",{staticClass:"chat-title"},[r("img",{attrs:{src:e.user.profileImgUrl}}),r("h1",[e._v("Chats")])]),e._l(e.chats,(function(t,n){return r("chat-preview",{key:n,attrs:{id:e.user._id,chat:t},nativeOn:{click:function(r){return e.selectChat(t)}}})}))],2):e._e()},Lr=[],Pr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.chat?r("div",{staticClass:"chat-preview"},[r("img",{class:{"unred-chat-img":e.isUnread},attrs:{src:e.imgUrl}}),r("div",{staticClass:"chat-preview-content",class:{"unred-chat":e.isUnread}},[r("h4",[e._v(e._s(e.partnerName))]),r("div",{staticClass:"chat-preview-txt"},[e.chat.msgs.length?r("p",[e._v(e._s(e.chat.msgs[e.chat.msgs.length-1].txt.substring(0,10))+"...")]):r("p",[e._v("You and "+e._s(e.partnerName)+" have no chat history")]),e.chat.updatedAt?r("p",[e._v(e._s(e._f("moment")(+e.chat.updatedAt,"calendar")))]):e._e()])])]):e._e()},Mr=[],Hr={props:{chat:Object,id:String},computed:{imgUrl:function(){return this.id===this.chat.user._id?this.chat.guide.imgUrl:this.chat.user.imgUrl},partnerName:function(){return this.id===this.chat.user._id?this.chat.guide.name:this.chat.user.name},isUnread:function(){if(this.chat.msgs.length)return!this.chat.msgs[this.chat.msgs.length-1].isRead}},created:function(){}},Yr=Hr,Gr=Object(d["a"])(Yr,Pr,Mr,!1,null,null,null),Wr=Gr.exports,qr={props:{chats:Array,user:Object},components:{chatPreview:Wr},methods:{selectChat:function(e){e.msgs.forEach((function(e){e.isRead=!0})),this.$emit("selectChat",e)}}},Jr=qr,Vr=Object(d["a"])(Jr,Dr,Lr,!1,null,null,null),zr=Vr.exports,Kr={components:{recentChats:zr,chat:Br},data:function(){return{user:null}},methods:{selectChat:function(e){this.$store.dispatch({type:"selectChat",chatId:e._id}),this.$store.dispatch({type:"updateChat",chat:e})},sendMsg:function(e){this.$store.dispatch({type:"sendMsg",chatId:this.selectedChat._id,msg:e})}},computed:{recentChats:function(){return this.$store.getters.chats},selectedChat:function(){return this.$store.getters.currChat}},created:function(){this.$store.dispatch({type:"loadChats"}),this.user=this.$store.getters.loggedInUser}},Qr=Kr,Xr=Object(d["a"])(Qr,kr,Cr,!1,null,null,null),Zr=Xr.exports,en=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bookings-list"},e._l(e.bookings,(function(e,t){return r("booking-preview",{key:t,attrs:{booking:e}})})),1)},tn=[],rn=(r("26e9"),{data:function(){return{bookings:null}},created:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$store.dispatch({type:"loadBookings"}));case 2:e=this.$store.getters.bookings,this.bookings=e.reverse();case 4:case"end":return t.stop()}}),null,this)},components:{bookingPreview:pr}}),nn=rn,sn=Object(d["a"])(nn,en,tn,!1,null,null,null),an=sn.exports,on={data:function(){return{activeName:"Overview",cmps:["Overview","Messenger","Bookings"],cmp:""}},components:{Overview:xr,Messenger:Zr,Bookings:an},created:function(){var e=this;c.$on("goMsg",(function(){e.activeName="Messenger"}))},methods:{notifClicked:function(e){"msg"===e.type?(this.$store.dispatch({type:"selectChat",chatId:e.chatId}),this.activeName="Messenger"):this.activeName="Bookings"},setCmp:function(e){this.activeName=e.paneName}}},cn=on,un=Object(d["a"])(cn,er,tr,!1,null,null,null),ln=un.exports,dn={components:{profileMenu:ln}},pn=dn,gn=Object(d["a"])(pn,Xt,Zt,!1,null,null,null),fn=gn.exports,mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit-guide-container mt-10"},[r("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.setCmp},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.cmps,(function(t,n){return r("el-tab-pane",{key:n,attrs:{label:t,name:t}},[r(e.activeName,{tag:"component",attrs:{guideToEdit:e.guideToEdit},on:{start:e.start,saveInfo:e.saveInfo,save:e.save}})],1)})),1)],1)},hn=[],vn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.guide?r("div",{staticClass:"basic-info-container flex row space-around"},[r("div",{staticClass:"first-section flex col"},[r("h2",[e._v("Full Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.guide.name,expression:"guide.name"}],staticClass:"details-input",attrs:{type:"text",placeholder:"Enter your full name"},domProps:{value:e.guide.name},on:{input:function(t){t.target.composing||e.$set(e.guide,"name",t.target.value)}}}),r("h2",[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.guide.email,expression:"guide.email"}],staticClass:"details-input",attrs:{type:"email",placeholder:"Enter your email"},domProps:{value:e.guide.email},on:{input:function(t){t.target.composing||e.$set(e.guide,"email",t.target.value)}}}),r("h2",[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.guide.password,expression:"guide.password"}],staticClass:"details-input",attrs:{type:"text",placeholder:"Enter a password"},domProps:{value:e.guide.password},on:{input:function(t){t.target.composing||e.$set(e.guide,"password",t.target.value)}}})]),r("div",{staticClass:"second-section flex col"},[r("h2",[e._v("Languages")]),r("v-select",{attrs:{multiple:"",options:["Spanish","Chinese","Italian","Russian","English","Greek","French"]},model:{value:e.guide.langs,callback:function(t){e.$set(e.guide,"langs",t)},expression:"guide.langs"}}),r("h2",[e._v("Location")]),r("h3",[e._v("Which city will you host your experience in?")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.guide.city,expression:"guide.city"}],staticClass:"details-input",attrs:{type:"text",placeholder:"Enter city"},domProps:{value:e.guide.city},on:{input:function(t){t.target.composing||e.$set(e.guide,"city",t.target.value)}}}),r("div",{staticClass:"flex space-between"},[r("button",{staticClass:"save-btn",on:{click:e.save}},[e._v("SAVE")])])],1)]):e._e()},wn=[],bn={props:{guideToEdit:Object},data:function(){return{guide:{}}},methods:{save:function(){this.$emit("saveInfo",this.guide)}},created:function(){this.guideToEdit&&(this.guide=this.guideToEdit)}},yn=bn,_n=Object(d["a"])(yn,vn,wn,!1,null,null,null),xn=_n.exports,kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.guide?n("div",{staticClass:"guide-experience-container"},[n("h1",[e._v("Tell us about yourself")]),n("div",{staticClass:"basic-info-container flex row space-around"},[n("div",{staticClass:"first-section flex col"},[n("h2",[e._v("Write a short descripsion about your self (Up to 180 characters)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.guideToEdit.desc,expression:"guideToEdit.desc"}],staticClass:"details-input",attrs:{maxlength:180,type:"text",placeholder:"Short description"},domProps:{value:e.guideToEdit.desc},on:{input:function(t){t.target.composing||e.$set(e.guideToEdit,"desc",t.target.value)}}}),n("h2",[e._v("Tell us more about yourself")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.guideToEdit.about,expression:"guideToEdit.about"}],staticClass:"details-input",attrs:{type:"email",placeholder:"More about yourself"},domProps:{value:e.guideToEdit.about},on:{input:function(t){t.target.composing||e.$set(e.guideToEdit,"about",t.target.value)}}}),e._v(" "),n("h2",[e._v("Add a profile picture")]),n("label",{staticClass:"input-label",attrs:{for:"profile"}},[n("img",{attrs:{src:r("f325")}}),n("input",{staticClass:"upload-input",attrs:{id:"profile",type:"file"},on:{change:e.uploadProfileImg}})]),this.guide.profileImgUrl?n("div",{staticClass:"imgs-input-preview"},[n("img",{attrs:{src:this.guide.profileImgUrl}}),n("button",{on:{click:e.deleteProfileImg}},[e._v("X")])]):e._e(),n("h2",[e._v("Add photos that describes you best")]),n("label",{staticClass:"input-label",attrs:{for:"file"}},[n("img",{attrs:{src:r("f325")}}),n("input",{staticClass:"upload-input",attrs:{id:"file",type:"file",multiple:""},on:{change:e.upload}})]),this.guide.imgUrls?n("div",{staticClass:"imgs-input-preview"},e._l(this.guide.imgUrls,(function(t){return n("div",{key:t},[n("img",{attrs:{src:t}}),n("button",{on:{click:function(r){return e.deleteImg(t)}}},[e._v("X")])])})),0):e._e(),n("h2",[e._v("Pick some questions that you connect with")]),e._l(e.questions,(function(t,r,i){return n("div",{key:i,staticClass:"quest flex col"},[n("label",{attrs:{for:r}},[e._v(e._s(r))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.questions[r],expression:"questions[quest]"}],attrs:{id:r,type:"text"},domProps:{value:e.questions[r]},on:{input:function(t){t.target.composing||e.$set(e.questions,r,t.target.value)}}})])})),n("button",{staticClass:"save-btn",on:{click:e.save}},[e._v("SAVE")])],2)])]):e._e()},Cn=[],On=r("bf2d");function Rn(e){var t,r,n,i;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t="dn7ikdvam",r="fjlfgfyp",n="https://api.cloudinary.com/v1_1/".concat(t,"/image/upload"),i=new FormData,i.append("file",e),i.append("upload_preset",r),s.abrupt("return",fetch(n,{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){return console.log(e.url),e})).catch((function(e){return console.error(e)})));case 7:case"end":return s.stop()}}))}var In={uploadImg:Rn},Un={props:{guideToEdit:Object},data:function(){return{fileList:[],selectedQuest:[],questions:{"WHO’S YOUR HERO (DEAD OR ALIVE) AND WHERE WOULD YOU TAKE THEM TO SHOW THEM A GOOD TIME?":"","IF TOMORROW WAS YOUR LAST DAY IN YOUR CITY BEFORE YOU LEFT FOR GOOD, HOW AND WHERE WOULD YOU SPEND IT?":"","WHAT’S THE THING YOU LOVE DOING THAT ISN’T WORK, RELATIONSHIP OR FAMILY RELATED?":"","WHAT ARE YOU WORKING ON THESE DAYS?":"","WHAT’S THE SPOT IN YOUR CITY YOU WOULDN’T BE CAUGHT DEAD IN?":"","WHAT’S YOUR FAVORITE VACATION CITY IN THE WORLD AND WHY?":"","NAME SOME SPOTS IN YOUR CITY THAT ARE GOOD FOR A TINDER DATE":"","WHAT MAKES YOU HAPPY?":"","WHAT’S YOUR CHOICE OF TRANSPORTATION IN YOUR CITY AND WHY?":"","WHAT ARE THE SPOTS A FIRST-TIME VISITOR CAN’T MISS?":"","WHERE DO YOU GO IF YOU HAVE TWO HOURS TO KILL?":"","WHAT WOULD MAKE A PERFECT DAY IN THE SUN FOR YOU?":"","WHAT’S THE THING YOU LOVE TO DO IN YOUR CITY THAT YOU NEVER GET TO DO?":"","WHAT DO YOU DO AND WHY DO YOU DO IT?":"","WHAT’S YOUR DREAM JOB?":"","WHAT DRIVES YOU MAD THESE DAYS?":""},guide:{}}},computed:{answer:function(e){console.log(e,"answer")}},methods:{upload:function(e){var t,r,n=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:for(r in t=[],e.target.files)"object"===Object(On["a"])(e.target.files[r])&&t.push(e.target.files[r]);t.forEach((function(e){var t,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(In.uploadImg(e));case 2:t=i.sent,r=t.url,n.guide.imgUrls.push(r);case 5:case"end":return i.stop()}}))}));case 3:case"end":return i.stop()}}))},uploadProfileImg:function(e){var t,r,n=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:for(r in t=[],e.target.files)"object"===Object(On["a"])(e.target.files[r])&&t.push(e.target.files[r]);t.forEach((function(e){var t,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(In.uploadImg(e));case 2:t=i.sent,r=t.url,n.guide.profileImgUrl=r;case 5:case"end":return i.stop()}}))}));case 3:case"end":return i.stop()}}))},save:function(){this.guide.questions=this.questions,this.guide.type="guide",this.$emit("saveInfo",this.guide),this.$emit("save")},deleteImg:function(e){var t=this.guide.imgUrls.findIndex((function(e){return e===e}));this.guide.imgUrls.splice(t,1)},deleteProfileImg:function(){this.guide.profileImgUrl=""}},created:function(){this.guideToEdit&&(this.guide=this.guideToEdit)}},En=Un,Sn=Object(d["a"])(En,kn,Cn,!1,null,null,null),$n=Sn.exports,Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.guide?n("div",{staticClass:"guide-interests-container"},[n("ul",{staticClass:"guide-interests-list-picker"},[e._m(0),e._l(e.interests,(function(t,i){return n("li",{key:i,staticClass:"guide-filter-interest",class:{"interest-selected":t.isSelected},on:{click:function(r){return e.selectInterest(t)}}},[e._v(" "+e._s(t.name.toUpperCase())+" "),n("img",{attrs:{src:r("9bed")("./"+t.name+".png")}})])}))],2),n("div",{staticClass:"flex justify-center"},[n("button",{staticClass:"save-btn",on:{click:e.save}},[e._v("SAVE")])])]):e._e()},Tn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"interests-header"},[r("h2",[e._v("Pick up to 3 interests that describe you the best:")])])}],Fn={props:{guideToEdit:Object},data:function(){return{guide:{},selectedInterests:{interests:[]},interests:[{name:"Culture",isSelected:!1},{name:"Coffee",isSelected:!1},{name:"Shopping",isSelected:!1},{name:"Music",isSelected:!1},{name:"NightLife",isSelected:!1},{name:"Animals",isSelected:!1},{name:"OutDoor",isSelected:!1},{name:"Food",isSelected:!1},{name:"Photos",isSelected:!1},{name:"Luxury",isSelected:!1},{name:"Architonic",isSelected:!1},{name:"Science",isSelected:!1}]}},methods:{selectInterest:function(e){if(3!==this.selectedInterests.interests.length||e.isSelected){e.isSelected=!e.isSelected;this.selectedInterests.interests;var t=this.selectedInterests.interests.indexOf(e.name);t<0?this.selectedInterests.interests.push(e.name):this.selectedInterests.interests.splice(t,1)}},save:function(){this.guide.interests=this.selectedInterests.interests,this.$emit("saveInfo",this.guide)}},created:function(){var e=this;this.guideToEdit.interests&&(this.guide=this.guideToEdit,this.guide.interests.forEach((function(t){e.interests.forEach((function(e){e.name===t&&(e.isSelected=!0)}))})),this.selectedInterests.interests=this.guide.interests)}},An=Fn,jn=Object(d["a"])(An,Nn,Tn,!1,null,null,null),Bn=jn.exports,Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-header-container"},[n("button",{staticClass:"start-btn",on:{click:e.start}},[e._v("Let's go")]),n("video",{staticClass:"video",attrs:{autoplay:"",loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[n("source",{attrs:{src:r("5740"),type:"video/mp4"}})]),e._m(0)])},Ln=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"video-header"},[r("h1",[e._v("Do what you love")]),r("h3",[e._v("An activity that goes beyond the typical tour or class, designed and led by locals all over the world. Show off your city, craft, cause, or culture by show us what you love. Turn your passion into profit")])])}],Pn={methods:{start:function(){this.$emit("start")}}},Mn=Pn,Hn=Object(d["a"])(Mn,Dn,Ln,!1,null,null,null),Yn=Hn.exports,Gn={data:function(){return{isStart:!0,activeName:"Hello",cmps:["Hello","Information","Interests","Experience"],guideToEdit:{email:"",password:"",name:"",city:"",langs:[],type:"guide",profileImgUrl:"",imgUrls:[],desc:"",about:"",price:"",interests:[],questions:{}}}},components:{Information:xn,Experience:$n,Interests:Bn,Hello:Yn},methods:{currCmp:function(e){return this.cmp=e},save:function(){this.$store.dispatch({type:"addGuide",guide:JSON.parse(JSON.stringify(this.guideToEdit))})},saveInfo:function(e){this.guideToEdit=e},start:function(){this.activeName="Information"},setCmp:function(e){this.isStart=!1,this.activeName=e.paneName}},created:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.params._id,!e){t.next=5;break}return t.next=4,regeneratorRuntime.awrap(this.$store.dispatch({type:"getUserById",_id:e}));case 4:this.guideToEdit=this.$store.getters.guide;case 5:case"end":return t.stop()}}),null,this)}},Wn=Gn,qn=Object(d["a"])(Wn,mn,hn,!1,null,null,null),Jn=qn.exports,Vn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login-form-container"},[r("h1",[e._v("LOGIN")]),r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:"Email","aria-placeholder":"Email",type:"email",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"Password","aria-placeholder":"Password",type:"password",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Login")]),r("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("Reset")])],1)],1),r("el-link",{attrs:{href:"/signup",type:"danger"}},[e._v("Not a member? Signup!")])],1)},zn=[],Kn={data:function(){return{ruleForm:{password:"",email:""},rules:{password:[{required:!0,message:"Please input password",trigger:"blur"}],email:{type:"email",required:!0,message:"Please input a valid email address",trigger:"submit"}}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,regeneratorRuntime.awrap(t.$store.dispatch({type:"login",userCred:t.ruleForm}));case 3:r=n.sent,r&&t.$router.replace("/"),n.next=9;break;case 7:return console.log("error submit!!"),n.abrupt("return",!1);case 9:case"end":return n.stop()}}))}))},resetForm:function(e){this.$refs[e].resetFields()},created:function(){}}},Qn=Kn,Xn=Object(d["a"])(Qn,Vn,zn,!1,null,null,null),Zn=Xn.exports,ei=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login-form-container"},[r("h1",[e._v("SIGNUP")]),r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{placeholder:"Name","aria-placeholder":"Name",type:"text",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:"Email","aria-placeholder":"Email",type:"email",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"Password","aria-placeholder":"Password",type:"password",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{prop:"passValidator"}},[r("el-input",{attrs:{placeholder:"Confirm password","aria-placeholder":"Confirm password",type:"password",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.passValidator,callback:function(t){e.$set(e.ruleForm,"passValidator",t)},expression:"ruleForm.passValidator"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Signup")]),r("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("Reset")])],1)],1),r("a",{attrs:{href:"/login"}},[e._v("Already a member? Login!")])],1)},ti=[],ri={data:function(){var e=this,t=function(t,r,n){""===r?n(new Error("Please input password")):(""!==e.ruleForm.validatePass&&e.$refs.ruleForm.validateField("passValidator"),n())},r=function(t,r,n){""===r?n(new Error("Please input password again")):r!==e.ruleForm.password?n(new Error("The passwords must match!")):n()};return{ruleForm:{password:"",passValidator:"",email:""},rules:{password:[{validator:t,trigger:"blur"}],passValidator:[{validator:r,trigger:"blur"}],email:{type:"email",required:!0,message:"Please input a valid email address",trigger:"blur"},name:{required:!0,message:"Please input your name",trigger:"blur"}}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return r={password:t.ruleForm.password,email:t.ruleForm.email,name:t.ruleForm.name},n.next=4,regeneratorRuntime.awrap(t.$store.dispatch({type:"signup",userCred:r}));case 4:t.$router.replace("/"),n.next=9;break;case 7:return console.log("error submit!!"),n.abrupt("return",!1);case 9:case"end":return n.stop()}}))}))},resetForm:function(e){this.$refs[e].resetFields()},created:function(){}}},ni=ri,ii=Object(d["a"])(ni,ei,ti,!1,null,null,null),si=ii.exports;n["default"].use(A["a"]);var ai=[{path:"/",name:"home",component:Me},{path:"/city/:_id",component:Ze},{path:"/guide/edit/:_id?",component:Jn},{path:"/guide/:_id",component:Qt},{path:"/login",component:Zn},{path:"/signup",component:si},{path:"/profile/:_id?",component:fn}],oi=new A["a"]({mode:"history",base:"/",routes:ai}),ci=oi,ui=r("2f62"),li=null;sessionStorage.user&&(li=JSON.parse(sessionStorage.user));var di={state:{users:[],currGuide:null,loggedInUser:li},getters:{loggedInUser:function(e){return e.loggedInUser},users:function(e){return e.users},guides:function(e){var t=e.users.filter((function(t){if(t.city)return t.city===e.currCity.name}));return t},guide:function(e){return e.currGuide}},mutations:{setUsers:function(e,t){var r=t.users;e.users=r},updateUser:function(e,t){var r=t.updatedUser,n=e.users.findIndex((function(e){return e._id===r._id}));e.users[n]=r},setUser:function(e,t){var r=t.user;e.loggedInUser=r},setCities:function(e,t){var r=t.cities;e.cities=r},setCurrCity:function(e,t){var r=t.currCity;e.currCity=r},setCurrGuide:function(e,t){var r=t.guide;e.currGuide=r}},actions:{updateUser:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.user,i.next=3,regeneratorRuntime.awrap(ne.update(r));case 3:n=i.sent,e.commit({type:"updateUser",updatedUser:n});case 5:case"end":return i.stop()}}))},loadUsers:function(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(ne.query());case 2:t=r.sent,e.commit({type:"setUsers",users:t});case 4:case"end":return r.stop()}}))},getUserById:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t._id,i.next=3,regeneratorRuntime.awrap(ne.getById(r));case 3:n=i.sent,e.commit({type:"setCurrGuide",guide:n});case 5:case"end":return i.stop()}}))},login:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.userCred,i.next=3,regeneratorRuntime.awrap(ne.login(r));case 3:return n=i.sent,e.commit({type:"setUser",user:n}),e.dispatch({type:"createUserSocket"}),e.dispatch({type:"loadNotifs"}),E.register().catch((function(e){return console.log(e)})),i.abrupt("return",n);case 9:case"end":return i.stop()}}))},signup:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.userCred,i.next=3,regeneratorRuntime.awrap(ne.signup(r));case 3:return n=i.sent,e.commit({type:"setUser",user:n}),i.abrupt("return",n);case 6:case"end":return i.stop()}}))},logout:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(ne.logout());case 2:e.commit({type:"setUser",user:null});case 3:case"end":return t.stop()}}))},addGuide:function(e,t){var r,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.guide,!r._id){e.next=7;break}return n=ne.getById(r._id),e.next=5,regeneratorRuntime.awrap(ne.update(n));case 5:e.next=9;break;case 7:return e.next=9,regeneratorRuntime.awrap(ne.add(r));case 9:case"end":return e.stop()}}))}}},pi={state:{currCity:null,cities:[]},getters:{cities:function(e){return e.cities}},mutations:{setCities:function(e,t){var r=t.cities;e.cities=r},setCurrCity:function(e,t){var r=t.currCity;e.currCity=r}},actions:{loadCities:function(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(D.query());case 2:t=r.sent,e.commit({type:"setCities",cities:t});case 4:case"end":return r.stop()}}))},getCityById:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.cityId,i.next=3,regeneratorRuntime.awrap(D.getById(r));case 3:return n=i.sent,e.commit({type:"setCurrCity",currCity:n}),i.abrupt("return",n);case 6:case"end":return i.stop()}}))}}};$r.on("insertUserNotif",(function(e){Ii.dispatch({type:"pushToUserNotifs",notif:e})})),$r.on("insertUserMsg",(function(e){var t=e.chatId,r=e.msg;Ii.dispatch({type:"pushUserMsg",chatId:t,msg:r})}));var gi={state:{},getters:{},mutations:{},actions:{createUserSocket:function(e){var t=e.rootGetters.loggedInUser._id;$r.emit("createUserSocket",t)},deleteUserSocket:function(e){console.log("heere!!!");var t=e.rootGetters.loggedInUser._id;$r.emit("deleteUserSocket",t)},sendBookingNotif:function(e,t){var r=t.notif;$r.emit("sendBookingNotif",r)},sendMsgNotif:function(e,t){var r=t.notif;$r.emit("sendMsgNotif",r)}}},fi={state:{currBooking:null,bookings:null},getters:{booking:function(e){return e.currBooking},bookings:function(e){return e.bookings}},mutations:{setCurrBooking:function(e,t){var r=t.booking;e.currBooking=r},setBookings:function(e,t){var r=t.bookings;e.bookings=r}},actions:{saveBooking:function(e,t){var r,n,i,s,a;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return r=t.booking,o.next=3,regeneratorRuntime.awrap(e.dispatch({type:"loadChats"}));case 3:return n=e.rootGetters.chats,n.some((function(e){return e.guide._id===r.toGuideId&&e.user._id===r.byUserId}))||e.dispatch({type:"createChat",chat:{guideId:r.toGuideId,userId:r.byUserId}}),o.next=7,regeneratorRuntime.awrap(ar.add(r));case 7:return i=o.sent,e.commit({type:"setCurrBooking",booking:i}),s={toId:r.toGuideId,fromId:r.byUserId,type:"booking",txt:"You just got a new booking",isRead:!1},o.next=12,regeneratorRuntime.awrap(e.dispatch({type:"addNotif",notif:s}));case 12:return a=o.sent,e.dispatch({type:"sendBookingNotif",notif:a.ops[0]}),o.abrupt("return",i);case 15:case"end":return o.stop()}}))},loadBookings:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.filterBy,i.next=3,regeneratorRuntime.awrap(ar.query(r));case 3:return n=i.sent,e.commit({type:"setBookings",bookings:n}),i.abrupt("return",n);case 6:case"end":return i.stop()}}))}}},mi={state:{reviews:null},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var r=t.reviews;e.reviews=r}},actions:{saveReview:function(e,t){var r,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.review,e.next=3,regeneratorRuntime.awrap(Ot.add(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}))},removeReview:function(e,t){var r,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.reviewId,e.next=3,regeneratorRuntime.awrap(Ot.remove(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}))},loadReviews:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.filterBy,i.next=3,regeneratorRuntime.awrap(Ot.query(r));case 3:return n=i.sent,e.commit({type:"setReviews",reviews:n}),i.abrupt("return",n);case 6:case"end":return i.stop()}}))}}},hi={query:vi,createChat:wi,addMsg:bi,updateChat:yi};function vi(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.get("chat/?id=".concat(e)));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}function wi(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.post("chat/",e));case 2:return t=r.sent,console.log(t),r.abrupt("return",t);case 5:case"end":return r.stop()}}))}function bi(e,t){return q.post("chat/".concat(e),t)}function yi(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(q.put("chat/",e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}var _i={state:{chats:[],currChat:null},getters:{chats:function(e){return e.chats},currChat:function(e){return e.currChat}},mutations:{setChats:function(e,t){var r=t.chats;e.chats=r},pushChatMsg:function(e,t){var r=t.chatId,n=t.msg,i=e.chats.findIndex((function(e){return e._id===r}));e.chats[i].msgs.push(n)},selectChat:function(e,t){var r=t.chatId,n=e.chats.find((function(e){return e._id===r}));e.currChat=n}},actions:{pushUserMsg:function(e,t){var r=t.msg,n=t.chatId;e.commit({type:"pushChatMsg",msg:r,chatId:n})},createChat:function(e,t){var r=t.chat;hi.createChat(r)},sendMsg:function(e,t){var r,n,i,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.chatId,n=t.msg,a.next=3,regeneratorRuntime.awrap(hi.addMsg(r,n));case 3:return e.commit({type:"pushChatMsg",msg:n,chatId:r}),i={type:"msg",toId:n.toId,fromId:n.fromId,chatId:r,msg:n,isRead:!1,txt:"New chat messege"},a.next=7,regeneratorRuntime.awrap(e.dispatch({type:"addNotif",notif:i}));case 7:s=a.sent,e.dispatch({type:"sendMsgNotif",notif:s.ops[0]});case 9:case"end":return a.stop()}}))},selectChat:function(e,t){var r=t.chatId;e.commit({type:"selectChat",chatId:r})},loadChats:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.rootGetters.loggedInUser._id,n.next=3,regeneratorRuntime.awrap(hi.query(t));case 3:r=n.sent,e.commit({type:"setChats",chats:r});case 5:case"end":return n.stop()}}))},updateChat:function(e,t){var r,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.chat,e.next=3,regeneratorRuntime.awrap(hi.updateChat(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}))}}},xi={query:ki,update:Oi,add:Ci};function ki(e){return e.toId?q.get("notif/?toId=".concat(e.toId)):e._id?(console.log(e._id,"filertetrby id"),q.get("notif/?_id=".concat(e._id))):void 0}function Ci(e){return q.post("notif",e)}function Oi(e){return q.put("notif/".concat(e._id),e)}r("3e8f");var Ri={state:{notifs:[]},getters:{unReadNotifs:function(e){return e.notifs.filter((function(e){return!e.isRead}))}},mutations:{setNotifs:function(e,t){var r=t.notifs;e.notifs=r},updateNotif:function(e,t){var r=t.updatedNotif,n=e.notifs.findIndex((function(e){return e._id===r._id}));e.notifs.splice(n,1,r)},pushToUserNotifs:function(e,t){var r=t.notif;e.notifs.push(r)}},actions:{addNotif:function(e,t){var r=t.notif;return xi.add(r)},updateNotif:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.notif,i.next=3,regeneratorRuntime.awrap(xi.update(r));case 3:n=i.sent,e.commit({type:"updateNotif",updatedNotif:n});case 5:case"end":return i.stop()}}))},loadNotifs:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.rootGetters.loggedInUser._id,n.next=3,regeneratorRuntime.awrap(xi.query({toId:t}));case 3:r=n.sent,e.commit({type:"setNotifs",notifs:r});case 5:case"end":return n.stop()}}))},pushToUserNotifs:function(e,t){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.notif,i.next=3,regeneratorRuntime.awrap(xi.query({_id:r._id}));case 3:n=i.sent,e.commit({type:"pushToUserNotifs",notif:n[0]});case 5:case"end":return i.stop()}}))}}};n["default"].use(ui["a"]);var Ii=new ui["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{userStore:di,cityStore:pi,socketStore:gi,bookingStore:fi,chatStore:_i,reviewStore:mi,notifStore:Ri}}),Ui=(r("b7e3"),r("5887")),Ei=r.n(Ui),Si=r("4a7a"),$i=r.n(Si),Ni=r("00e4"),Ti=r("5c96"),Fi=r.n(Ti),Ai=(r("0fae"),r("0a63")),ji=r.n(Ai),Bi=(r("0706"),r("f13c"));n["default"].use(Bi),n["default"].use(Fi.a),n["default"].use(Ni["a"]),n["default"].component("v-select",$i.a),n["default"].use(Ei.a),n["default"].use(r("2ead")),n["default"].use(ji.a),n["default"].config.productionTip=!1,n["default"].config.pwa={name:"Local Genius",themeColor:"#ffffff"},new n["default"]({router:ci,store:Ii,components:{},render:function(e){return e(T)}}).$mount("#app")},5740:function(e,t,r){e.exports=r.p+"media/video.e61dce71.mp4"},6487:function(e,t,r){e.exports=r.p+"img/heart.2bc401ac.svg"},6626:function(e,t,r){e.exports=r.p+"img/notification.faec80f8.svg"},6887:function(e,t,r){e.exports=r.p+"img/Music.aa9d8c6a.png"},"6bff":function(e,t,r){e.exports=r.p+"img/avatar.e0947469.svg"},"87cf":function(e,t,r){e.exports=r.p+"img/Food.9507f9a4.png"},"887e":function(e,t,r){e.exports=r.p+"img/Architonic.8d54be95.png"},"8e51":function(e,t,r){e.exports=r.p+"img/Sport.a95a9e40.png"},"8f8e":function(e,t,r){e.exports=r.p+"img/avatarFill.768483e1.svg"},"910e":function(e,t,r){e.exports=r.p+"img/house.be227af4.svg"},"97b2":function(e,t,r){},"9bed":function(e,t,r){var n={"./Animals.png":"3059","./Architonic.png":"887e","./Coffee.png":"bae4","./Culture.png":"ed92","./Food.png":"87cf","./Luxury.png":"4572","./Music.png":"6887","./NightLife.png":"491a","./OutDoor.png":"db57","./Photos.png":"0ba1","./Science.png":"da19","./Shopping.png":"35f4","./Sport.png":"8e51"};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id="9bed"},b0f6:function(e,t,r){e.exports=r.p+"img/home-bg2.1921808e.jpg"},b7e3:function(e,t,r){},bae4:function(e,t,r){e.exports=r.p+"img/Coffee.caf5dac1.png"},bccc:function(e,t,r){e.exports=r.p+"img/houseFill.4b7d00d3.svg"},c465:function(e,t,r){e.exports=r.p+"img/notificationFill.a8535607.svg"},cefb:function(e,t,r){e.exports=r.p+"img/banner2.f7a8d056.jpg"},da19:function(e,t,r){e.exports=r.p+"img/Science.4e2c88e4.png"},db57:function(e,t,r){e.exports=r.p+"img/OutDoor.9e35ba69.png"},dd3d:function(e,t,r){e.exports=r.p+"img/notiff.868b286e.png"},e60e:function(e,t,r){e.exports=r.p+"img/arrow-up.91687b1b.png"},ed92:function(e,t,r){e.exports=r.p+"img/Culture.53dfef5e.png"},f18c:function(e,t,r){},f325:function(e,t,r){e.exports=r.p+"img/upload.c663fa49.png"},f560:function(e,t,r){"use strict";var n=r("97b2"),i=r.n(n);i.a}});
//# sourceMappingURL=app.9fd7042a.js.map